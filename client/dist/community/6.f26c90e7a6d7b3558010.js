(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{XpXM:function(t,e,n){"use strict";n.r(e),n.d(e,"MainModule",function(){return p});var o=n("ofXK"),i=n("3Pt+"),a=n("tyNb"),s=n("fXoL"),r=n("UbJi"),c=n("7fM4");function b(t,e){if(1&t&&(s.Lb(0,"a",7),s.fc(1," ...see more"),s.Kb()),2&t){const t=s.Ub();s.Zb("routerLink","post/",t.id,"")}}let l=(()=>{class t{constructor(t,e){this.auth=t,this.socketService=e,this.newData=new s.n,this.newComments=new s.n,this.content="",this.profileImage="",this.name="",this.id="",this.owner="",this.origin="",this.socket=this.socketService.socket}ngOnInit(){this.visibility="comment"!=this.origin,this.auth.onAuthStateChanged(t=>{document.getElementById(this.id).hidden=!t||t.uid!=this.owner})}delete(t){this.auth.onAuthStateChanged(e=>{e&&e.uid==this.owner&&("post"==this.origin?this.socket.emit("deletePost",{id:t.target.id},t=>{t?this.newData.emit(t):console.log("aa")}):this.socket.emit("deleteComment",{id:t.target.id},t=>{t?this.newComments.emit(t):console.log("aa")}))})}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(r.a),s.Ib(c.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-question"]],inputs:{content:"content",profileImage:"profileImage",name:"name",id:"id",owner:"owner",origin:"origin"},outputs:{newData:"newData",newComments:"newComments"},decls:15,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-3"],["alt","",3,"src"],[1,"col-9"],[3,"routerLink",4,"ngIf"],[1,"container","fas","fa-trash",3,"id","click"],[3,"routerLink"]],template:function(t,e){1&t&&(s.Lb(0,"div",0),s.Jb(1,"br"),s.Lb(2,"div",1),s.Lb(3,"div",2),s.Jb(4,"img",3),s.Kb(),s.Lb(5,"div",4),s.Lb(6,"h2"),s.fc(7),s.Kb(),s.Jb(8,"br"),s.Lb(9,"p"),s.fc(10),s.Vb(11,"slice"),s.ec(12,b,2,1,"a",5),s.Kb(),s.Kb(),s.Lb(13,"i",6),s.Sb("click",function(t){return e.delete(t)}),s.Kb(),s.Kb(),s.Jb(14,"br"),s.Kb()),2&t&&(s.yb(4),s.Yb("src",e.profileImage,s.cc),s.yb(3),s.gc(e.name),s.yb(3),s.hc("",s.Wb(11,5,e.content,0,150)," "),s.yb(2),s.Xb("ngIf",e.visibility),s.yb(1),s.Yb("id",e.id))},directives:[o.i,a.f],pipes:[o.l],styles:[".container[_ngcontent-%COMP%]{background-color:#fff}img[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:100px;display:block;margin-left:auto;margin-right:auto;margin-top:1%}a[_ngcontent-%COMP%]{text-decoration:none}.fa-trash[_ngcontent-%COMP%]{position:absolute;width:30px;right:6%}"]}),t})();function d(t,e){if(1&t){const t=s.Mb();s.Lb(0,"div",15),s.Lb(1,"app-question",16),s.Sb("newData",function(e){return s.bc(t),s.Ub().getNewData(e)}),s.Kb(),s.Kb()}if(2&t){const t=e.$implicit;s.yb(1),s.Xb("name",t.name)("content",t.content)("profileImage",t.profileImage)("id",t._id)("owner",t.ownerUid)("origin","post")}}function m(t,e){if(1&t){const t=s.Mb();s.Lb(0,"div"),s.Lb(1,"app-question",17),s.Sb("newComments",function(e){return s.bc(t),s.Ub().getNewComments(e)}),s.Kb(),s.Jb(2,"br"),s.Kb()}if(2&t){const t=e.$implicit;s.yb(1),s.Xb("name",t.ownerName)("content",t.content)("profileImage",t.ownerImage)("id",t._id)("owner",t.ownerUid)("origin","comment")}}const u=[{path:"",component:(()=>{class t{constructor(t,e,n,o){this.auth=t,this.router=e,this.socketService=n,this.socket=this.socketService.socket}ngOnInit(){this.auth.onAuthStateChanged(t=>{t?(document.getElementById("user").hidden=!1,document.getElementById("nouser").hidden=!0,this.socket.emit("user",{userUid:t.uid},t=>{0!=t.length?(this.profileImage=t[0].profileImage,this.username=t[0].username):console.log("nothing")})):(document.getElementById("user").hidden=!0,document.getElementById("nouser").hidden=!1)}),this.socket.on("getAll",t=>{0==t.length?alert("no posts yet"):(this.posts=t,console.log(t),setTimeout(function(){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"})},100))})}post(){this.auth.onAuthStateChanged(t=>{this.socket.emit("newPost",{ownerName:this.username,content:this.content,ownerUid:t.uid,profile:this.profileImage},t=>{t&&(this.posts=t,console.log(t),this.content="",setTimeout(function(){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"})},100))})})}getNewData(t){alert(t),console.log(t),this.posts=t}nouser(){alert("no user, sign in first")}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(r.a),s.Ib(a.e),s.Ib(c.a),s.Ib(a.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-main"]],inputs:{newData:"newData"},decls:20,vars:4,consts:[["class","margin",4,"ngFor","ngForOf"],["id","user","data-bs-toggle","modal","data-bs-target","#newPostModel",1,"fas","fa-plus-circle","fa-2x"],["id","nouser",1,"fas","fa-plus-circle","fa-2x",3,"click"],["id","newPostModel","tabindex","-1","aria-labelledby","newPostModelLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","newPostModelLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["type","text","placeholder","your name","aria-label",".form-control-sm example","disabled","",1,"form-control","mb-3","form-control-sm",3,"ngModel","value","ngModelChange"],["name","","id","","cols","30","rows","10",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"margin"],[3,"name","content","profileImage","id","owner","origin","newData"]],template:function(t,e){1&t&&(s.Lb(0,"h2"),s.fc(1,"Main Page"),s.Kb(),s.ec(2,d,2,6,"div",0),s.Jb(3,"i",1),s.Lb(4,"i",2),s.Sb("click",function(){return e.nouser()}),s.Kb(),s.Lb(5,"div",3),s.Lb(6,"div",4),s.Lb(7,"div",5),s.Lb(8,"div",6),s.Lb(9,"h5",7),s.fc(10,"New post"),s.Kb(),s.Jb(11,"button",8),s.Kb(),s.Lb(12,"div",9),s.Lb(13,"input",10),s.Sb("ngModelChange",function(t){return e.username=t}),s.Kb(),s.Lb(14,"textarea",11),s.Sb("ngModelChange",function(t){return e.content=t}),s.Kb(),s.Kb(),s.Lb(15,"div",12),s.Lb(16,"button",13),s.fc(17,"Cancel"),s.Kb(),s.Lb(18,"button",14),s.Sb("click",function(){return e.post()}),s.fc(19,"Post"),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb()),2&t&&(s.yb(2),s.Xb("ngForOf",e.posts),s.yb(11),s.Yb("value",e.username),s.Xb("ngModel",e.username),s.yb(1),s.Xb("ngModel",e.content))},directives:[o.h,i.a,i.c,i.d,l],styles:["i[_ngcontent-%COMP%]{position:fixed;bottom:2%;right:2%}.margin[_ngcontent-%COMP%]{margin:2%}"]}),t})()},{path:"post/:id",component:(()=>{class t{constructor(t,e,n){this.route=t,this.auth=e,this.socketService=n,this.socket=this.socketService.socket}ngOnInit(){var t=this.route.snapshot.params.id;this.socket.emit("getPost",{id:t},t=>{t&&(console.log(t[0].content),this.fatherPostName=t[0].name,this.fatherPostContent=t[0].content,this.fatherPostImage=t[0].profileImage)}),this.socket.emit("getAllComments",{father:t},t=>{this.comments=t,setTimeout(function(){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"})},100)}),this.auth.onAuthStateChanged(t=>{t&&this.socket.emit("user",{userUid:t.uid},t=>{0!=t.length?(this.currentUserName=t[0].username,this.currentUserImage=t[0].profileImage,console.log(t)):console.log("nothing")})})}addComment(){this.auth.onAuthStateChanged(t=>{t&&this.socket.emit("addComment",{ownerUid:t.uid,content:this.newCommentContent,ownerName:this.currentUserName,ownerImage:this.currentUserImage,fatherPost:this.route.snapshot.params.id},t=>{this.comments=t,setTimeout(function(){window.scrollTo({top:document.body.scrollHeight,left:0,behavior:"smooth"})},100)})})}getNewComments(t){this.comments=t}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(a.a),s.Ib(r.a),s.Ib(c.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-post"]],decls:25,vars:7,consts:[[1,"title"],["calss","main-post",2,"text-align","center"],["alt","",3,"src"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"fas","fa-comments","fa-2x"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["type","text","placeholder","your name","aria-label",".form-control-sm example","disabled","",1,"form-control","mb-3","form-control-sm",3,"ngModel","value","ngModelChange"],["name","","id","","cols","30","rows","10",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["data-bs-dismiss","modal","type","button",1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],[3,"name","content","profileImage","id","owner","origin","newComments"]],template:function(t,e){1&t&&(s.Lb(0,"h2",0),s.fc(1,"Comments"),s.Kb(),s.Lb(2,"div",1),s.Jb(3,"img",2),s.Lb(4,"h4"),s.fc(5),s.Kb(),s.Lb(6,"p"),s.fc(7),s.Kb(),s.Kb(),s.Jb(8,"i",3),s.Lb(9,"div",4),s.Lb(10,"div",5),s.Lb(11,"div",6),s.Lb(12,"div",7),s.Lb(13,"h5",8),s.fc(14,"Comment"),s.Kb(),s.Jb(15,"button",9),s.Kb(),s.Lb(16,"div",10),s.Lb(17,"input",11),s.Sb("ngModelChange",function(t){return e.currentUserName=t}),s.Kb(),s.Lb(18,"textarea",12),s.Sb("ngModelChange",function(t){return e.newCommentContent=t}),s.Kb(),s.Kb(),s.Lb(19,"div",13),s.Lb(20,"button",14),s.fc(21,"Cancel"),s.Kb(),s.Lb(22,"button",15),s.Sb("click",function(){return e.addComment()}),s.fc(23,"Submit"),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.ec(24,m,3,6,"div",16)),2&t&&(s.yb(3),s.Yb("src",e.fatherPostImage,s.cc),s.yb(2),s.gc(e.fatherPostName),s.yb(2),s.gc(e.fatherPostContent),s.yb(10),s.Yb("value",e.currentUserName),s.Xb("ngModel",e.currentUserName),s.yb(1),s.Xb("ngModel",e.newCommentContent),s.yb(6),s.Xb("ngForOf",e.comments))},directives:[i.a,i.c,i.d,o.h,l],styles:["img[_ngcontent-%COMP%]{width:200px;height:190px;border-radius:100%;display:block;margin-left:auto;margin-right:auto;margin-top:1%}.fa-comments[_ngcontent-%COMP%]{position:fixed;bottom:2%;right:2%}.title[_ngcontent-%COMP%]{margin-top:4%}.main-post[_ngcontent-%COMP%]{border:3px;text-align:center;margin:100px}"]}),t})()}];let h=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(u)],a.g]}),t})();var g=n("spgP"),f=n("AytR");let p=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[o.b,h,i.b,g.a.initializeApp(f.a.firebaseConfig),r.b]]}),t})()}}]);